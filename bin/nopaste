#!/usr/bin/perl
use strict;
use warnings;
use App::Nopaste;

my $text = do { local $/; <> };

my $services = defined($ENV{NOPASTE_SERVICES})
            && [split ' ', $ENV{NOPASTE_SERVICES}];

my $url = App::Nopaste->nopaste(
    text     => $text,
    nick     => $ENV{NOPASTE_NICK} || $ENV{USER},
    services => $services,
);

if ($url) {
    print $url;
    print "\n";
}

